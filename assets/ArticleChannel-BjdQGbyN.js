import{r as s,ak as S,c as x,o as b,a as t,b as a,e as $,f as T,h as D,g as F,k as B,m as w,al as z,t as k,y as M,a2 as N,a6 as U,ac as q,ad as I,ae as Q,i as V,af as j,ag as G,ah as Z,ai as H,V as J,am as K}from"./index-Zwcu3AnZ.js";import{_ as O}from"./PageContainer-B0wbHxum.js";import{f as P,g as R,u as W,h as X,i as Y}from"./article-Bm3VqdvR.js";/* empty css                    *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 */const ee={class:"dialog-footer"},ae={__name:"ChannelEdit",setup(A,{expose:y}){const n=s(!1),i=s(""),l=s(),r=s("");y({show:(p,e)=>{n.value=!0,r.value=e,e==="edit"&&(i.value="编辑分类"),e==="add"&&(i.value="添加分类"),l.value={...p}}});const h={cate_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{pattern:/^\S{1,10}$/,message:"分类名必须是1-10位的非空字符",trigger:"blur"}],cate_alias:[{required:!0,message:"请输入分类别名",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{1,15}$/,message:"分类别名必须是1-15位的字母数字",trigger:"blur"}]},m=S("getChannelList"),o=async()=>{await P(l.value),m(),k.success("添加成功！")},_=async()=>{await R(l.value),m(),k.success("编辑成功！")},u=s(),c=async()=>{await u.value.validate(),n.value=!1,r.value==="add"&&o(),r.value==="edit"&&_()};return(p,e)=>{const f=D,v=T,g=$,C=B,L=z;return b(),x(L,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=d=>n.value=d),title:i.value,width:"40%"},{footer:t(()=>[F("div",ee,[a(C,{onClick:e[2]||(e[2]=d=>n.value=!1)},{default:t(()=>e[4]||(e[4]=[w("取消")])),_:1}),a(C,{type:"primary",onClick:c},{default:t(()=>e[5]||(e[5]=[w(" 确定 ")])),_:1})])]),default:t(()=>[a(g,{model:l.value,rules:h,ref_key:"form",ref:u},{default:t(()=>[a(v,{label:"分类名称",prop:"cate_name"},{default:t(()=>[a(f,{modelValue:l.value.cate_name,"onUpdate:modelValue":e[0]||(e[0]=d=>l.value.cate_name=d),minlength:"1",maxlength:"15"},null,8,["modelValue"])]),_:1}),a(v,{label:"分类别名",prop:"cate_alias"},{default:t(()=>[a(f,{modelValue:l.value.cate_alias,"onUpdate:modelValue":e[1]||(e[1]=d=>l.value.cate_alias=d),minlength:"1",maxlength:"15"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},ce={__name:"ArticleChannel",setup(A){const y=W(),n=s([]),i=async()=>{l.value=!0;const o=await X();n.value=o.data.data,y.setChannelList(n.value),l.value=!1};M(()=>{i()});const l=s(!0);K("getChannelList",i);const r=s(),E=()=>{r.value.show({cate_name:"",caye_alias:""},"add")},h=o=>{r.value.show(o,"edit")},m=async o=>{await J.confirm("真要删除我吗QAQ?","删除",{confirmButtonText:"是的",cancelButtonText:"再想想",type:"warning"}),await Y(o),i()};return(o,_)=>{const u=B,c=Q,p=Z,e=I,f=O,v=H;return b(),N(U,null,[a(f,{title:"文章分类"},{extra:t(()=>[a(u,{type:"primary",onClick:E},{default:t(()=>_[0]||(_[0]=[w("添加分类")])),_:1})]),default:t(()=>[q((b(),x(e,{data:n.value,style:{width:"100%"}},{empty:t(()=>[a(p,{description:"什么都没找到哦"})]),default:t(()=>[a(c,{type:"index",label:"序号",width:"100"}),a(c,{prop:"cate_name",label:"分类名称"}),a(c,{prop:"cate_alias",label:"分类别名"}),a(c,{label:"操作",width:"100"},{default:t(({row:g})=>[a(u,{type:"primary",size:"small",icon:V(j),circle:"",plain:"",onClick:C=>h(g)},null,8,["icon","onClick"]),a(u,{size:"small",type:"danger",icon:V(G),onClick:C=>m(g.id),circle:"",plain:""},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[v,l.value]])]),_:1}),a(ae,{ref_key:"dialog",ref:r},null,512)],64)}}};export{ce as default};
