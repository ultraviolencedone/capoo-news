import{_ as U,x as k,r as i,c as _,a as s,o,b as n,E,d as x,g as y,ac as B,a7 as b,a2 as u,k as A,i as h,aq as C,m as N,ai as R,ar as S,t as V}from"./index-Zwcu3AnZ.js";import{_ as D}from"./PageContainer-B0wbHxum.js";/* empty css               *//* empty css                  *//* empty css                    *//* empty css                   */const I="/origin/assets/avatar-CQlNaQTu.jpg",L=["src"],Q={key:1,src:I,width:"278"},T={__name:"UserAvatar",setup(j){const c=k(),t=i(c.user.user_pic),p=r=>{const e=r.raw||r;if(!(e instanceof Blob)){console.error("Invalid file type:",e);return}const a=new FileReader;a.readAsDataURL(e),a.onload=()=>{t.value=a.result}},l=i(!1),d=async()=>{l.value=!0,await S(t.value),await c.getUser(),l.value=!1,V({type:"success",message:"更换头像成功"})};return(r,e)=>{const a=b,f=A,m=x,v=E,g=D,w=R;return o(),_(g,{title:"更换头像"},{default:s(()=>[n(v,null,{default:s(()=>[n(m,{span:12},{default:s(()=>[n(a,{ref:"uploadRef",class:"avatar-uploader","auto-upload":!1,"show-file-list":!1,"on-change":p},{default:s(()=>[t.value?(o(),u("img",{key:0,src:t.value,class:"avatar"},null,8,L)):(o(),u("img",Q))]),_:1},512),e[1]||(e[1]=y("br",null,null,-1)),B((o(),_(f,{onClick:d,type:"success",icon:h(C),size:"large"},{default:s(()=>e[0]||(e[0]=[N(" 上传头像 ")])),_:1},8,["icon"])),[[w,l.value]])]),_:1})]),_:1})]),_:1})}}},J=U(T,[["__scopeId","data-v-dea69bdf"]]);export{J as default};
