import{r as d,x as E,c as m,a as r,u as y,o as i,b as t,E as U,d as x,e as N,f as R,h as q,ac as B,k as C,m as F,ai as $,as as h,t as I}from"./index-B2D0tL9m.js";import{_ as O}from"./PageContainer-CSauLOt7.js";/* empty css               *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                   */const J={__name:"UserPassword",setup(P){const l=d({old_pwd:"",new_pwd:"",re_pwd:""}),w={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,e,o)=>{e===l.value.old_pwd?o(new Error("原密码和新密码不能一样!")):o()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,e,o)=>{e!==l.value.new_pwd?o(new Error("新密码和确认再次输入的新密码不一样!")):o()},trigger:"blur"}]},p=d(),c=y(),_=E(),n=d(!1),g=async()=>{await p.value.validate()&&(n.value=!0,await h(l.value),I({type:"success",message:"更换密码成功"}),_.setToken(""),_.setUser({}),n.value=!1,c.push("/login"))};return(u,e)=>{const o=q,s=R,f=C,v=N,b=x,S=U,V=O,k=$;return i(),m(V,{title:"重置密码"},{default:r(()=>[t(S,null,{default:r(()=>[t(b,{span:12},{default:r(()=>[t(v,{model:l.value,rules:w,ref_key:"formRef",ref:p,"label-width":"100px",size:"large"},{default:r(()=>[t(s,{label:"原密码",prop:"old_pwd"},{default:r(()=>[t(o,{modelValue:l.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),t(s,{label:"新密码",prop:"new_pwd"},{default:r(()=>[t(o,{modelValue:l.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),t(s,{label:"确认新密码",prop:"re_pwd"},{default:r(()=>[t(o,{modelValue:l.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),t(s,null,{default:r(()=>[B((i(),m(f,{onClick:g,type:"primary"},{default:r(()=>e[3]||(e[3]=[F("修改密码")])),_:1})),[[k,n.value]])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{J as default};
